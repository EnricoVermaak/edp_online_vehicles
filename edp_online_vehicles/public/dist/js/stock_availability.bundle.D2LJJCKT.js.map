{
  "version": 3,
  "sources": ["frappe-html:/home/saqi/bench-15/apps/edp_online_vehicles/edp_online_vehicles/edp_online_vehicles/dashboard/stock_availability.html", "frappe-html:/home/saqi/bench-15/apps/edp_online_vehicles/edp_online_vehicles/edp_online_vehicles/dashboard/stock_availability_list.html", "../../../../../apps/edp_online_vehicles/edp_online_vehicles/edp_online_vehicles/dashboard/stock_availability.js"],
  "sourcesContent": ["\n\tfrappe.templates['stock_availability'] = `<div class=\"stock-levels\">\n\t<div class=\"result\">\n\t</div>\n\t<div class=\"more hidden\" style=\"padding: 15px;\">\n\t\t<a class=\"btn btn-default btn-xs btn-more\">More</a>\n\t</div>\n</div>\n`;\n", "\n\tfrappe.templates['stock_availability_list'] = `<style>\n    th.rotate {\n        height: 120px;\n        white-space: nowrap;\n    }\n\n    th.rotate > div {\n        transform:\n            /* Magic Numbers */\n            translate(25px, 0px)\n            /* 45 is really 360 - 45 */\n            rotate(315deg);\n        width: 30px;\n    }\n\n    th.rotate > div > span {\n        border-bottom: 1px solid darkgray;\n        padding: 5px 10px;\n    }\n\n    tbody td {\n        border-left: 1px solid darkgray;\n        border-right: 1px solid darkgray;\n    }\n\n    .button-wrapper {\n        position: relative;\n    }\n\n    .btn-order {\n        position: absolute;\n        right: -5.5em;\n        background-color: #056fa6;\n        color: white;\n    }\n\n    tr.category {\n        background-color: rgba(211, 211, 211, 0.829);\n    }\n</style>\n\n{% if hide_dealer_stock == 1 %}\n  <style>\n    .hide-column {\n      display: none;\n    }\n  </style>\n{% endif %}\n\n{% if hide_unconfirmed_shipments == 1 %}\n  <style>\n    .hide-ship-column {\n      display: none;\n    }\n  </style>\n{% endif %}\n\n<div>\n    <table class=\"table\">\n        <thead>\n            <tr>\n                {% for header in headers %}\n                    {% if header == \"Range\" %}\n                        <th><div><span>{{ __(header) }}</span></div></th>\n                    {% else %}\n                        {% if header == \"Model Code\" %}\n                            <th><div><span>{{ __(header) }}</span></div></th>\n                        {% else %}\n                            {% if header == \"Description\" %}\n                                <th><div><span>{{ __(header) }}</span></div></th>\n                            {% else %}\n                                {% if header == \"Dealers\" %}\n                                    <th class=\"hide-column rotate\"><div><span>{{ __(header) }}</span></div></th>\n                                {% else %}\n                                    <th class=\"rotate\"><div><span>{{ __(header) }}</span></div></th>\n                                {% endif %}\n                            {% endif %}\n                        {% endif %}\n                    {% endif %}\n                {% endfor %}\n                <th class=\"rotate\"><div><span>Total</span></div></th>\n                <th class=\"hide-ship-column rotate\"><div><span>Unconfirmed</span></div></th>\n            </tr>\n        </thead>\n        <tbody>\n            {% for d in data %}\n                <tr class=\"category\">\n                    <td>\n                        <a data-type=\"model_range\" data-name=\"{{ d.model_range }}\">{{ d.model_range }}</a>\n                    </td>\n                    <td>\n\n                    </td>\n                    <td>\n\n                    </td>\n\n                    {% if d.hq_company_total == 0 %}\n                        <td>\n                            <a data-type=\"hq_company_total\" data-name=\"{{ d.hq_company_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"hq_company_total\" data-name=\"{{ d.hq_company_total }}\">{{ d.hq_company_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.dealers_total == 0 %}\n                        <td class=\"hide-column\">\n                            <a data-type=\"dealers_total\" data-name=\"{{ d.dealers_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td class=\"hide-column\">\n                            <a data-type=\"dealers_total\" data-name=\"{{ d.dealers_total }}\">{{ d.dealers_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.pipeline_total == 0 %}\n                        <td>\n                            <a data-type=\"pipeline_total\" data-name=\"{{ d.pipeline_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"pipeline_total\" data-name=\"{{ d.pipeline_total }}\">{{ d.pipeline_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_1_total == 0 %}\n                        <td>\n                            <a data-type=\"date_1_total\" data-name=\"{{ d.date_1_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_1_total\" data-name=\"{{ d.date_1_total }}\">{{ d.date_1_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_2_total == 0 %}\n                        <td>\n                            <a data-type=\"date_2_total\" data-name=\"{{ d.date_2_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_2_total\" data-name=\"{{ d.date_2_total }}\">{{ d.date_2_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_3_total == 0 %}\n                        <td>\n                            <a data-type=\"date_3_total\" data-name=\"{{ d.date_3_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_3_total\" data-name=\"{{ d.date_3_total }}\">{{ d.date_3_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_4_total == 0 %}\n                        <td>\n                            <a data-type=\"date_4_total\" data-name=\"{{ d.date_4_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_4_total\" data-name=\"{{ d.date_4_total }}\">{{ d.date_4_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_5_total == 0 %}\n                        <td>\n                            <a data-type=\"date_5_total\" data-name=\"{{ d.date_5_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_5_total\" data-name=\"{{ d.date_5_total }}\">{{ d.date_5_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_6_total == 0 %}\n                        <td>\n                            <a data-type=\"date_6_total\" data-name=\"{{ d.date_6_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_6_total\" data-name=\"{{ d.date_6_total }}\">{{ d.date_6_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_7_total == 0 %}\n                        <td>\n                            <a data-type=\"date_7_total\" data-name=\"{{ d.date_7_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_7_total\" data-name=\"{{ d.date_7_total }}\">{{ d.date_7_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_8_total == 0 %}\n                        <td>\n                            <a data-type=\"date_8_total\" data-name=\"{{ d.date_8_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_8_total\" data-name=\"{{ d.date_8_total }}\">{{ d.date_8_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_9_total == 0 %}\n                        <td>\n                            <a data-type=\"date_9_total\" data-name=\"{{ d.date_9_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_9_total\" data-name=\"{{ d.date_9_total }}\">{{ d.date_9_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_10_total == 0 %}\n                        <td>\n                            <a data-type=\"date_10_total\" data-name=\"{{ d.date_10_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_10_total\" data-name=\"{{ d.date_10_total }}\">{{ d.date_10_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_11_total == 0 %}\n                        <td>\n                            <a data-type=\"date_11_total\" data-name=\"{{ d.date_11_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_11_total\" data-name=\"{{ d.date_11_total }}\">{{ d.date_11_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.date_12_total == 0 %}\n                        <td>\n                            <a data-type=\"date_12_total\" data-name=\"{{ d.date_12_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"date_12_total\" data-name=\"{{ d.date_12_total }}\">{{ d.date_12_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.models_total == 0 %}\n                        <td>\n                            <a data-type=\"models_total\" data-name=\"{{ d.models_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td>\n                            <a data-type=\"models_total\" data-name=\"{{ d.models_total }}\">{{ d.models_total }}</a>\n                        </td>\n                    {% endif %}\n\n                    {% if d.unconfirmed_shipments_total == 0 %}\n                        <td class=\"hide-ship-column\">\n                            <a data-type=\"unconfirmed_shipments_total\" data-name=\"{{ d.unconfirmed_shipments_total }}\"></a>\n                        </td>\n                    {% else %}\n                        <td class=\"hide-ship-column\">\n                            <a data-type=\"unconfirmed_shipments_total\" data-name=\"{{ d.unconfirmed_shipments_total }}\">{{ d.unconfirmed_shipments_total }}</a>\n                        </td>\n                    {% endif %}\n                </tr>\n\n                {% for model in d.models %}\n\n                    <tr>\n                        <td>\n\n                        </td>\n                        <td>\n                            <a data-type=\"model_code\" data-name=\"{{ model.model_code }}\">\n                                {{ model.model_code }}\n                            </a>\n                        </td>\n                        <td>\n                            <a data-type=\"model\" data-name=\"{{ model.model }}\">{{ model.model }}</a>\n                        </td>\n\n                        {% if model.hq_company == 0 %}\n                            <td>\n                                <a class=\"hq_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.hq_company }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"hq_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.hq_company }}\">{{ model.hq_company }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.dealers == 0 %}\n                            <td class=\"hide-column\">\n                                <a class=\"dealer_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.dealers }}\"></a>\n                            </td>\n                        {% else %}\n                            <td class=\"hide-column\">\n                                <a class=\"dealer_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.dealers }}\">{{ model.dealers }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.pipeline == 0 %}\n                            <td>\n                                <a class=\"pipeline_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.pipeline }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"pipeline_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.pipeline }}\">{{ model.pipeline }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_1 == 0 %}\n                            <td>\n                                <a class=\"date_1_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_1 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_1_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_1 }}\">{{ model.date_1 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_2 == 0 %}\n                            <td>\n                                <a class=\"date_2_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_2 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_2_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_2 }}\">{{ model.date_2 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_3 == 0 %}\n                            <td>\n                                <a class=\"date_3_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_3 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_3_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_3 }}\">{{ model.date_3 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_4 == 0 %}\n                            <td>\n                                <a class=\"date_4_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_4 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_4_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_4 }}\">{{ model.date_4 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_5 == 0 %}\n                            <td>\n                                <a class=\"date_5_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_5 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_5_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_5 }}\">{{ model.date_5 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_6 == 0 %}\n                            <td>\n                                <a class=\"date_6_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_6 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_6_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_6 }}\">{{ model.date_6 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_7 == 0 %}\n                            <td>\n                                <a class=\"date_7_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_7 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_7_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_7 }}\">{{ model.date_7 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_8 == 0 %}\n                            <td>\n                                <a class=\"date_8_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_8 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_8_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_8 }}\">{{ model.date_8 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_9 == 0 %}\n                            <td>\n                                <a class=\"date_9_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_9 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_9_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_9 }}\">{{ model.date_9 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_10 == 0 %}\n                            <td>\n                                <a class=\"date_10_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_10 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_10_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_10 }}\">{{ model.date_10 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_11 == 0 %}\n                            <td>\n                                <a class=\"date_11_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_11 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_11_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_11 }}\">{{ model.date_11 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if model.date_12 == 0 %}\n                            <td>\n                                <a class=\"date_12_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_12 }}\"></a>\n                            </td>\n                        {% else %}\n                            <td>\n                                <a class=\"date_12_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.date_12 }}\">{{ model.date_12 }}</a>\n                            </td>\n                        {% endif %}\n\n\n                        {% if hide_unconfirmed_shipments == 1 %}\n\n                            {% if model.models_total == 0 %}\n                                <td>\n                                    <div class=\"button-wrapper\">\n                                        <button class=\"btn btn-xs btn-order\"\n                                            data-disable_quick_entry=\"{{ d.disable_quick_entry }}\"\n                                            data-model_code=\"{{ model.model_code }}\"\n                                            data-actual_qty=\"{{ model.actual_qty }}\"\n                                            data-model=\"{{ model.model }}\">{{ __(\"Order\") }}</button>\n                                    </div>\n                                    <a class=\"total_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.total }}\"></a>\n                                </td>\n                            {% else %}\n                                <td>\n                                    <div class=\"button-wrapper\">\n                                        <button class=\"btn btn-xs btn-order\"\n                                            data-disable_quick_entry=\"{{ d.disable_quick_entry }}\"\n                                            data-model_code=\"{{ model.model_code }}\"\n                                            data-actual_qty=\"{{ model.actual_qty }}\"\n                                            data-model=\"{{ model.model }}\">{{ __(\"Order\") }}</button>\n                                    </div>\n                                    <a class=\"total_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.total }}\">{{ model.total }}</a>\n                                </td>\n                            {% endif %}\n\n                            {% if model.unconfirmed_shipments == 0 %}\n                                <td class=\"hide-ship-column\">\n                                    <a data-name=\"{{ model.unconfirmed_shipments }}\"></a>\n                                </td>\n                            {% else %}\n                                <td class=\"hide-ship-column\">\n                                    <a data-name=\"{{ model.unconfirmed_shipments }}\">{{ model.unconfirmed_shipments }}</a>\n                                </td>\n                            {% endif %}\n\n                        {% else %}\n\n                            {% if model.total == 0 %}\n                                <td>\n                                    <a class=\"total_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.total }}\"></a>\n                                </td>\n                            {% else %}\n                                <td>\n                                    <a class=\"total_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.total }}\">{{ model.total }}</a>\n                                </td>\n                            {% endif %}\n\n                            {% if model.unconfirmed_shipments == 0 %}\n                                <td>\n                                    <div class=\"button-wrapper\">\n                                        <button class=\"btn btn-xs btn-order\"\n                                            data-disable_quick_entry=\"{{ d.disable_quick_entry }}\"\n                                            data-model_code=\"{{ model.model_code }}\"\n                                            data-actual_qty=\"{{ model.actual_qty }}\"\n                                            data-model=\"{{ model.model }}\">{{ __(\"Order\") }}</button>\n                                    </div>\n                                    <a class=\"unconfirmed_click\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.unconfirmed_shipments }}\"></a>\n                                </td>\n                            {% else %}\n                                <td>\n                                    <div class=\"button-wrapper\">\n                                        <button class=\"btn btn-xs btn-order\"\n                                            data-disable_quick_entry=\"{{ d.disable_quick_entry }}\"\n                                            data-model_code=\"{{ model.model_code }}\"\n                                            data-actual_qty=\"{{ model.actual_qty }}\"\n                                            data-model=\"{{ model.model }}\">{{ __(\"Order\") }}</button>\n                                    </div>\n                                    <a class=\"unconfirmed_click\" data-model_code=\"{{ model.model_code }}\" data-model_code=\"{{ model.model_code }}\" data-name=\"{{ model.unconfirmed_shipments }}\">{{ model.unconfirmed_shipments }}</a>\n                                </td>\n                            {% endif %}\n\n                        {% endif %}\n                    </tr>\n                {% endfor %}\n            {% endfor %}\n        </tbody>\n    </table>\n</div>\n`;\n", "frappe.provide(\"edp_online_vehicles.edp_online_vehicles\");\n\n/* global edp_online_vehicles */\n\nfunction ensureStyleTag(id, css) {\n  if (document.getElementById(id)) return;\n  const el = document.createElement('style');\n  el.id = id;\n  el.appendChild(document.createTextNode(css));\n  document.head.appendChild(el);\n}\n\nfunction getPageBody() {\n  // current visible page body in Frappe Desk\n  return $('.page-body:visible').last();\n}\n\nedp_online_vehicles.edp_online_vehicles.StockAvailability = class StockAvailability {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t}\n\tmake() {\n\t\tvar me = this;\n\t\tthis.start = 0;\n\n\t\tthis.content = $(frappe.render_template(\"stock_availability\")).appendTo(\n\t\t\tthis.parent,\n\t\t);\n\t\tthis.result = this.content.find(\".result\");\n\n\t\tthis.content.on(\"click\", \".btn-order\", function () {\n\t\t\thandle_order($(this), \"Order\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".hq_click\", function () {\n\t\t\thandle_stock_popup($(this), \"HQ\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".dealer_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Dealer\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".pipeline_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Pipeline\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_1_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 1\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_2_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 2\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_3_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 3\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_4_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 4\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_5_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 5\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_6_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 6\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_7_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 7\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_8_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 8\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_9_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 9\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_10_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 10\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_11_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 11\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".date_12_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Date 12\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".total_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Total\");\n\t\t});\n\n\t\tthis.content.on(\"click\", \".unconfirmed_click\", function () {\n\t\t\thandle_stock_popup($(this), \"Unconfirmed\");\n\t\t});\n\n\t\tfunction handle_order(element, action) {\n\t\t\tlet model_code = unescape(element.attr(\"data-model_code\"));\n\t\t\tlet model_description = unescape(element.attr(\"data-model\"));\n\n\t\t\tif (action === \"Order\") {\n\t\t\t\topen_vehicle_order(model_code, model_description);\n\t\t\t}\n\t\t}\n\n\t\tfunction open_vehicle_order(model_code, model_description) {\n\t\t\t// Store the model data temporarily in localStorage\n\t\t\tlocalStorage.setItem(\n\t\t\t\t\"vehicle_order_model_data\",\n\t\t\t\tJSON.stringify({\n\t\t\t\t\tmodel_code: model_code,\n\t\t\t\t\tmodel_description: model_description,\n\t\t\t\t}),\n\t\t\t);\n\t\t\t// Open a new Vehicle Order\n\t\t\tfrappe.new_doc(\"Vehicle Order\");\n\t\t}\n\n\t\tfunction handle_stock_popup(element, action) {\n\t\t\tlet model_code = unescape(element.attr(\"data-model_code\"));\n\n\t\t\tif (action === \"HQ\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_hq_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Dealer\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_dealer_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Pipeline\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 1\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 2\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 3\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 4\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 5\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 6\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 7\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 8\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 9\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 10\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 11\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Date 12\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_pipline_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t\tdate: action,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Total\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_total_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (action === \"Unconfirmed\") {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_popup_data.get_unconfirmed_data\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tmodel: model_code,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\topen_vehicle_shipment_popup(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction open_vehicle_popup(vehicle_data) {\n\t\t\tlet count = vehicle_data.length;\n\t\t\tensureStyleTag('vehicle-popup-css', `\n\t\t\t\t#vehicle-popup {\n\t\t\t\tposition: fixed;\n\t\t\t\tbottom: 0; left: 0; right: 0;\n\t\t\t\tbackground: #fff;\n\t\t\t\tborder-top: 1px solid #ccc;\n\t\t\t\tbox-shadow: 0 -2px 5px rgba(0,0,0,0.2);\n\t\t\t\tz-index: 9999;\n\t\t\t\tpadding-bottom: 10px; padding-left: 10px; padding-right: 10px;\n\t\t\t\tmax-height: 35vh; overflow-y: auto; resize: vertical;\n\t\t\t\t}\n\t\t\t\t#vehicle-popup .popup-header {\n\t\t\t\tdisplay: flex; justify-content: space-between; align-items: center;\n\t\t\t\tborder-bottom: 1px solid #ccc; padding-bottom: 5px; margin-bottom: 10px;\n\t\t\t\tposition: sticky; top: 0; background: #fff; z-index: 10;\n\t\t\t\t}\n\t\t\t\t#vehicle-popup .popup-title { font-size: 16px; font-weight: bold; }\n\t\t\t\t#vehicle-popup .popup-count { margin-right: auto; padding-left: 10px; font-size: 14px; color: #555; }\n\t\t\t\t#vehicle-popup .popup-close { background: transparent; border: none; font-size: 18px; cursor: pointer; }\n\t\t\t\t#vehicle-popup .action-container { display: flex; align-items: center; margin-bottom: 10px; }\n\t\t\t\t#vehicle-popup .vin-search { padding: 5px; border: 1px solid #ccc; border-radius: 5px; }\n\t\t\t\t#vehicle-popup .action-group { margin-left: auto; position: relative; }\n\t\t\t\t#vehicle-popup .action-btn, #vehicle-popup .view-model-btn { cursor: pointer; margin-left: 5px; }\n\t\t\t\t#vehicle-popup .dropdown-menu {\n\t\t\t\tdisplay: none; position: absolute; top: 100%; left: 0; background-color: #fff; min-width: 150px;\n\t\t\t\tbox-shadow: 0 8px 16px rgba(0,0,0,0.2); z-index: 10;\n\t\t\t\t}\n\t\t\t\t#vehicle-popup .dropdown-menu a { display: block; padding: 8px 12px; text-decoration: none; color: #000; cursor: pointer; }\n\t\t\t\t#vehicle-popup .dropdown-menu a.disabled { color: #999; pointer-events: none; }\n\t\t\t\t#vehicle-popup .dropdown-menu a:hover { background-color: #f1f1f1; }\n\t\t\t\t#vehicle-popup table { width: 100%; }\n\t\t\t\t#vehicle-popup th, #vehicle-popup td { padding: 5px; text-align: left; }\n\t\t\t`);\n\n\t\t\tconst $page = getPageBody();\n\n\t\t\t// nuke any stale instance that may live in a hidden page\n\t\t\t$page.find('#vehicle-popup').remove();\n\n\t\t\tlet $popup = $page.find('#vehicle-popup');\n\t\t\tif (!$popup.length) {\n\t\t\t$popup = $(`\n\t\t\t\t<div id=\"vehicle-popup\">\n\t\t\t\t<div class=\"popup-header\">\n\t\t\t\t\t<span class=\"popup-title\">${__(\"Vehicle Details\")}</span>\n\t\t\t\t\t<span class=\"popup-count\"></span>\n\t\t\t\t\t<button class=\"popup-close\">X</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"action-container\">\n\t\t\t\t\t<input type=\"text\" class=\"vin-search\" placeholder=\"${__(\"Search VIN/Serial No\")}\" />\n\t\t\t\t\t<div class=\"action-group\">\n\t\t\t\t\t<button class=\"view-model-btn btn btn-primary\">${__(\"View Model\")}</button>\n\t\t\t\t\t<button class=\"action-btn btn btn-primary\">${__(\"Action\")}</button>\n\t\t\t\t\t<div class=\"dropdown-menu\">\n\t\t\t\t\t\t<a class=\"dropdown-item allocate-order\" href=\"#\">${__(\"Allocate to Order\")}</a>\n\t\t\t\t\t\t<a class=\"dropdown-item reserve\" href=\"#\">${__(\"Reserve\")}</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"popup-content\"></div>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t\t$page.append($popup);\n\n\t\t\t\t$(document).off('click.vehiclePopup', '#vehicle-popup .popup-close');\n\t\t\t\t$(document).on('click.vehiclePopup', '#vehicle-popup .popup-close', function () {\n\t\t\t\t\t$('#vehicle-popup').remove();\n\t\t\t\t});\n\n\t\t\t\t$popup.find(\".allocate-order\").on(\"click\", function () {\n\t\t\t\t\tallocateOrderAction($popup);\n\t\t\t\t});\n\n\t\t\t\t$popup.find(\".reserve\").on(\"click\", function () {\n\t\t\t\t\treserveAction($popup);\n\t\t\t\t});\n\n\t\t\t\t$popup.find(\".view-model-btn\").on(\"click\", function (e) {\n\t\t\t\t\t// Since all vehicles are the same model, use the model from the first row.\n\t\t\t\t\tlet modelCode = $popup\n\t\t\t\t\t\t.find(\".popup-content table tbody tr:first td:eq(2)\")\n\t\t\t\t\t\t.text()\n\t\t\t\t\t\t.trim();\n\t\t\t\t\tif (!modelCode) {\n\t\t\t\t\t\talert(\"Unable to retrieve model details.\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\topen_model_popup(modelCode);\n\t\t\t\t});\n\n\t\t\t\t// Toggle dropdown on action button click\n\t\t\t\t$popup.find(\".action-btn\").on(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tlet $btn = $(this);\n\t\t\t\t\tlet $menu = $btn.siblings(\".dropdown-menu\");\n\n\t\t\t\t\tif ($menu.is(\":visible\")) {\n\t\t\t\t\t\t$menu.hide();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet btnPos = $btn.position();\n\t\t\t\t\tlet btnHeight = $btn.outerHeight();\n\t\t\t\t\tlet desiredLeft = btnPos.left;\n\n\t\t\t\t\t$menu\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\ttop: btnPos.top + btnHeight,\n\t\t\t\t\t\t\tleft: desiredLeft,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.show();\n\n\t\t\t\t\tlet menuRect = $menu[0].getBoundingClientRect();\n\t\t\t\t\tlet viewportWidth = $(window).width();\n\t\t\t\t\tif (menuRect.right > viewportWidth) {\n\t\t\t\t\t\tlet shift = menuRect.right - viewportWidth + 5;\n\t\t\t\t\t\t$menu.css({ left: desiredLeft - shift });\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Hide dropdown when clicking elsewhere\n\t\t\t\t$(document).on(\"click\", function () {\n\t\t\t\t\t$popup.find(\".dropdown-menu\").hide();\n\t\t\t\t});\n\n\t\t\t\t// Hide the action button if the user's default company is not the Head Office company\n\t\t\t\tlet user_company = frappe.defaults.get_user_default(\"Company\");\n\t\t\t\tfrappe.db.get_value(\n\t\t\t\t\t\"Company\",\n\t\t\t\t\t{ custom_head_office: 1 },\n\t\t\t\t\t\"name\",\n\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\tif (r && r.name && r.name !== user_company) {\n\t\t\t\t\t\t\t$popup.find(\".action-btn\").hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Build table HTML with a checkbox column\n\t\t\tlet html = `<table class=\"table table-bordered\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th><input type=\"checkbox\" id=\"select-all\"></th>\n\t\t\t\t\t\t<th>${__(\"Range\")}</th>\n\t\t\t\t\t\t<th>${__(\"Model Code\")}</th>\n\t\t\t\t\t\t<th>${__(\"Model Description\")}</th>\n\t\t\t\t\t\t<th>${__(\"Stock #\")}</th>\n\t\t\t\t\t\t<th>${__(\"Vin/Serial No\")}</th>\n\t\t\t\t\t\t<th>${__(\"Dealer\")}</th>\n\t\t\t\t\t\t<th>${__(\"Colour\")}</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>`;\n\n\t\t\tvehicle_data.forEach(function (row) {\n\t\t\t\tlet vin = row[\"Vin/Serial No\"] || \"\";\n\t\t\t\tlet disabledAttr = vin ? \"\" : \"disabled\";\n\t\t\t\thtml += `<tr>\n\t\t\t\t\t<td><input type=\"checkbox\" class=\"vehicle-checkbox\" ${disabledAttr}></td>\n\t\t\t\t\t<td>${row.Range || \"\"}</td>\n\t\t\t\t\t<td>${row.Model || \"\"}</td>\n\t\t\t\t\t<td>${row.Description || \"\"}</td>\n\t\t\t\t\t<td>${row[\"Stock No\"] || \"\"}</td>\n\t\t\t\t\t<td class=\"vinserial_no\">${vin}</td>\n\t\t\t\t\t<td>${row.Dealer || \"\"}</td>\n\t\t\t\t\t<td>${row.Colour || \"\"}</td>\n\t\t\t\t</tr>`;\n\t\t\t});\n\t\t\thtml += `</tbody></table>`;\n\n\t\t\t$popup.find(\".popup-content\").html(html);\n\t\t\t$popup.find(\".popup-count\").text(`${count} ${__(\"Vehicles\")}`);\n\n\t\t\t// \"Select all\" checkbox event handler: only select checkboxes that are not disabled\n\t\t\t$popup.find(\"#select-all\").on(\"change\", function () {\n\t\t\t\tlet checked = $(this).prop(\"checked\");\n\t\t\t\t$popup\n\t\t\t\t\t.find(\".vehicle-checkbox:not(:disabled)\")\n\t\t\t\t\t.prop(\"checked\", checked);\n\t\t\t\tupdateActionDropdownState();\n\t\t\t});\n\n\t\t\t$popup.find(\".vehicle-checkbox\").on(\"change\", function () {\n\t\t\t\tupdateActionDropdownState();\n\t\t\t});\n\n\t\t\tfunction updateActionDropdownState() {\n\t\t\t\tlet checkedCount = $popup.find(\n\t\t\t\t\t\".vehicle-checkbox:checked\",\n\t\t\t\t).length;\n\t\t\t\tlet $allocate = $popup.find(\".dropdown-menu .allocate-order\");\n\n\t\t\t\tif (checkedCount > 1) {\n\t\t\t\t\t$allocate.addClass(\"disabled\");\n\t\t\t\t} else {\n\t\t\t\t\t$allocate.removeClass(\"disabled\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// VIN/Serial No search filtering\n\t\t\t$popup.find(\".vin-search\").on(\"keyup\", function () {\n\t\t\t\tlet searchValue = $(this).val().toLowerCase();\n\t\t\t\tlet $tableBody = $popup.find(\".popup-content table tbody\");\n\t\t\t\tlet visibleCount = 0;\n\n\t\t\t\t$tableBody.find(\"tr\").each(function () {\n\t\t\t\t\tlet $row = $(this);\n\t\t\t\t\tif ($row.hasClass(\"no-match\")) return;\n\t\t\t\t\tlet vinText = $row\n\t\t\t\t\t\t.find(\".vinserial_no\")\n\t\t\t\t\t\t.text()\n\t\t\t\t\t\t.toLowerCase();\n\t\t\t\t\tif (vinText.indexOf(searchValue) !== -1) {\n\t\t\t\t\t\t$row.show();\n\t\t\t\t\t\tvisibleCount++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$row.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$tableBody.find(\"tr.no-match\").remove();\n\t\t\t\t$popup\n\t\t\t\t\t.find(\".popup-count\")\n\t\t\t\t\t.text(`${visibleCount} ${__(\"Vehicles\")}`);\n\n\t\t\t\tif (visibleCount === 0) {\n\t\t\t\t\tlet colCount = $popup.find(\n\t\t\t\t\t\t\".popup-content table thead th\",\n\t\t\t\t\t).length;\n\t\t\t\t\t$tableBody.append(\n\t\t\t\t\t\t`<tr class=\"no-match\"><td colspan=\"${colCount}\" style=\"text-align: center;\">${__(\n\t\t\t\t\t\t\t\"No matching VIN/Serial No found\",\n\t\t\t\t\t\t)}</td></tr>`,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$popup.show();\n\t\t}\n\n\t\tfunction open_vehicle_shipment_popup(vehicle_data) {\n\t\t\tlet count = vehicle_data.length;\n\t\t\tensureStyleTag('vehicle-popup-css', `\n\t\t\t\t#vehicle-popup {\n\t\t\t\tposition: fixed;\n\t\t\t\tbottom: 0; left: 0; right: 0;\n\t\t\t\tbackground: #fff;\n\t\t\t\tborder-top: 1px solid #ccc;\n\t\t\t\tbox-shadow: 0 -2px 5px rgba(0,0,0,0.2);\n\t\t\t\tz-index: 9999;\n\t\t\t\tpadding-bottom: 10px; padding-left: 10px; padding-right: 10px;\n\t\t\t\tmax-height: 35vh; overflow-y: auto; resize: vertical;\n\t\t\t\t}\n\t\t\t\t#vehicle-popup .popup-header {\n\t\t\t\tdisplay: flex; justify-content: space-between; align-items: center;\n\t\t\t\tborder-bottom: 1px solid #ccc; padding-bottom: 5px; margin-bottom: 10px;\n\t\t\t\tposition: sticky; top: 0; background: #fff; z-index: 10;\n\t\t\t\t}\n\t\t\t\t#vehicle-popup .popup-title { font-size: 16px; font-weight: bold; }\n\t\t\t\t#vehicle-popup .popup-count { margin-right: auto; padding-left: 10px; font-size: 14px; color: #555; }\n\t\t\t\t#vehicle-popup .popup-close { background: transparent; border: none; font-size: 18px; cursor: pointer; }\n\t\t\t\t#vehicle-popup .action-container { display: flex; align-items: center; margin-bottom: 10px; }\n\t\t\t\t#vehicle-popup .vin-search { padding: 5px; border: 1px solid #ccc; border-radius: 5px; }\n\t\t\t\t#vehicle-popup .action-group { margin-left: auto; position: relative; }\n\t\t\t\t#vehicle-popup .action-btn, #vehicle-popup .view-model-btn { cursor: pointer; margin-left: 5px; }\n\t\t\t\t#vehicle-popup .dropdown-menu {\n\t\t\t\tdisplay: none; position: absolute; top: 100%; left: 0; background-color: #fff; min-width: 150px;\n\t\t\t\tbox-shadow: 0 8px 16px rgba(0,0,0,0.2); z-index: 10;\n\t\t\t\t}\n\t\t\t\t#vehicle-popup .dropdown-menu a { display: block; padding: 8px 12px; text-decoration: none; color: #000; cursor: pointer; }\n\t\t\t\t#vehicle-popup .dropdown-menu a.disabled { color: #999; pointer-events: none; }\n\t\t\t\t#vehicle-popup .dropdown-menu a:hover { background-color: #f1f1f1; }\n\t\t\t\t#vehicle-popup table { width: 100%; }\n\t\t\t\t#vehicle-popup th, #vehicle-popup td { padding: 5px; text-align: left; }\n\t\t\t`);\n\n\t\t\tconst $page = getPageBody();\n\n\t\t\t// nuke any stale instance that may live in a hidden page\n\t\t\t$page.find('#vehicle-popup').remove();\n\n\t\t\tlet $popup = $page.find('#vehicle-popup');\n\n\t\t\tif (!$popup.length) {\n\t\t\t\t$popup = $(`\n\t\t\t\t\t<div id=\"vehicle-popup\">\n\t\t\t\t\t\t<div class=\"popup-header\">\n\t\t\t\t\t\t\t<span class=\"popup-title\">${__(\"Vehicle Details\")}</span>\n\t\t\t\t\t\t\t<span class=\"popup-count\"></span>\n\t\t\t\t\t\t\t<button class=\"popup-close\">X</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"action-container\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"vin-search\" placeholder=\"${__(\"Search VIN/Serial No\")}\" />\n\t\t\t\t\t\t\t<div class=\"action-group\">\n\t\t\t\t\t\t\t\t<button class=\"view-model-btn btn btn-primary\">${__(\"View Model\")}</button>\n\t\t\t\t\t\t\t\t<button class=\"action-btn btn btn-primary\">${__(\"Action\")}</button>\n\t\t\t\t\t\t\t\t<div class=\"dropdown-menu\">\n\t\t\t\t\t\t\t\t\t<a class=\"dropdown-item allocate-order\" href=\"#\">${__(\"Allocate to Order\")}</a>\n\t\t\t\t\t\t\t\t\t<a class=\"dropdown-item reserve\" href=\"#\">${__(\"Reserve\")}</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-content\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`);\n\t\t\t\t$page.append($popup);\n\n\t\t\t\t$(document).off('click.vehiclePopup', '#vehicle-popup .popup-close');\n\t\t\t\t$(document).on('click.vehiclePopup', '#vehicle-popup .popup-close', function () {\n\t\t\t\t\t$('#vehicle-popup').remove();\n\t\t\t\t});\n\n\t\t\t\t$popup.find(\".allocate-order\").on(\"click\", function () {\n\t\t\t\t\tallocateOrderAction($popup);\n\t\t\t\t});\n\n\t\t\t\t$popup.find(\".reserve\").on(\"click\", function () {\n\t\t\t\t\treserveAction($popup);\n\t\t\t\t});\n\n\t\t\t\t// Add View Model button handler\n\t\t\t\t$popup.find(\".view-model-btn\").on(\"click\", function (e) {\n\t\t\t\t\t// Get the model from the first row of the table (all vehicles use the same model)\n\t\t\t\t\tlet modelCode = $popup\n\t\t\t\t\t\t.find(\".popup-content table tbody tr:first td:eq(2)\")\n\t\t\t\t\t\t.text()\n\t\t\t\t\t\t.trim();\n\t\t\t\t\tif (!modelCode) {\n\t\t\t\t\t\talert(\"Unable to retrieve model details.\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\topen_model_popup(modelCode);\n\t\t\t\t});\n\n\t\t\t\t// Toggle dropdown on action button click\n\t\t\t\t$popup.find(\".action-btn\").on(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tlet $btn = $(this);\n\t\t\t\t\tlet $menu = $btn.siblings(\".dropdown-menu\");\n\n\t\t\t\t\tif ($menu.is(\":visible\")) {\n\t\t\t\t\t\t$menu.hide();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet btnPos = $btn.position();\n\t\t\t\t\tlet btnHeight = $btn.outerHeight();\n\t\t\t\t\tlet desiredLeft = btnPos.left;\n\n\t\t\t\t\t$menu\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\ttop: btnPos.top + btnHeight,\n\t\t\t\t\t\t\tleft: desiredLeft,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.show();\n\n\t\t\t\t\tlet menuRect = $menu[0].getBoundingClientRect();\n\t\t\t\t\tlet viewportWidth = $(window).width();\n\t\t\t\t\tif (menuRect.right > viewportWidth) {\n\t\t\t\t\t\tlet shift = menuRect.right - viewportWidth + 5;\n\t\t\t\t\t\t$menu.css({ left: desiredLeft - shift });\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$(document).off('click.vehiclePopupGlobal');\n\t\t\t\t$(document).on('click.vehiclePopupGlobal', function () {\n\t\t\t\t\t$('#vehicle-popup .dropdown-menu').hide();\n\t\t\t\t});\n\n\t\t\t\t// Hide the action button if the user's default company is not the Head Office company\n\t\t\t\tlet user_company = frappe.defaults.get_user_default(\"Company\");\n\t\t\t\tfrappe.db.get_value(\n\t\t\t\t\t\"Company\",\n\t\t\t\t\t{ custom_head_office: 1 },\n\t\t\t\t\t\"name\",\n\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\tif (r && r.name && r.name !== user_company) {\n\t\t\t\t\t\t\t$popup.find(\".action-btn\").hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Build table HTML with a checkbox column\n\t\t\tlet html = `<table class=\"table table-bordered\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th><input type=\"checkbox\" id=\"select-all\"></th>\n\t\t\t\t\t\t<th>${__(\"Range\")}</th>\n\t\t\t\t\t\t<th>${__(\"Model\")}</th>\n\t\t\t\t\t\t<th>${__(\"Stock #\")}</th>\n\t\t\t\t\t\t<th>${__(\"Vin/Serial No\")}</th>\n\t\t\t\t\t\t<th>${__(\"ETA Date\")}</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>`;\n\n\t\t\tvehicle_data.forEach(function (row) {\n\t\t\t\tlet vin = row[\"Vin/Serial No\"] || \"\";\n\t\t\t\tlet disabledAttr = vin ? \"\" : \"disabled\";\n\t\t\t\thtml += `<tr>\n\t\t\t\t\t<td><input type=\"checkbox\" class=\"vehicle-checkbox\" ${disabledAttr}></td>\n\t\t\t\t\t<td>${row.Range || \"\"}</td>\n\t\t\t\t\t<td>${row.Model || \"\"}</td>\n\t\t\t\t\t<td>${row[\"Stock No\"] || \"\"}</td>\n\t\t\t\t\t<td class=\"vinserial_no\">${vin}</td>\n\t\t\t\t\t<td>${row[\"ETA Date\"] || \"\"}</td>\n\t\t\t\t</tr>`;\n\t\t\t});\n\t\t\thtml += `</tbody></table>`;\n\n\t\t\t$popup.find(\".popup-content\").html(html);\n\t\t\t$popup.find(\".popup-count\").text(`${count} ${__(\"Vehicles\")}`);\n\n\t\t\t$popup.find(\"#select-all\").on(\"change\", function () {\n\t\t\t\tlet checked = $(this).prop(\"checked\");\n\t\t\t\t$popup\n\t\t\t\t\t.find(\".vehicle-checkbox:not(:disabled)\")\n\t\t\t\t\t.prop(\"checked\", checked);\n\t\t\t\tupdateActionDropdownState();\n\t\t\t});\n\n\t\t\t$popup.find(\".vehicle-checkbox\").on(\"change\", function () {\n\t\t\t\tupdateActionDropdownState();\n\t\t\t});\n\n\t\t\tfunction updateActionDropdownState() {\n\t\t\t\tlet checkedCount = $popup.find(\n\t\t\t\t\t\".vehicle-checkbox:checked\",\n\t\t\t\t).length;\n\t\t\t\tlet $allocate = $popup.find(\".dropdown-menu .allocate-order\");\n\t\t\t\tif (checkedCount > 1) {\n\t\t\t\t\t$allocate.addClass(\"disabled\");\n\t\t\t\t} else {\n\t\t\t\t\t$allocate.removeClass(\"disabled\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// VIN/Serial No search filtering\n\t\t\t$popup.find(\".vin-search\").on(\"keyup\", function () {\n\t\t\t\tlet searchValue = $(this).val().toLowerCase();\n\t\t\t\tlet $tableBody = $popup.find(\".popup-content table tbody\");\n\t\t\t\tlet visibleCount = 0;\n\n\t\t\t\t$tableBody.find(\"tr\").each(function () {\n\t\t\t\t\tlet $row = $(this);\n\t\t\t\t\tif ($row.hasClass(\"no-match\")) return;\n\t\t\t\t\tlet vinText = $row\n\t\t\t\t\t\t.find(\".vinserial_no\")\n\t\t\t\t\t\t.text()\n\t\t\t\t\t\t.toLowerCase();\n\t\t\t\t\tif (vinText.indexOf(searchValue) !== -1) {\n\t\t\t\t\t\t$row.show();\n\t\t\t\t\t\tvisibleCount++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$row.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$tableBody.find(\"tr.no-match\").remove();\n\t\t\t\t$popup\n\t\t\t\t\t.find(\".popup-count\")\n\t\t\t\t\t.text(`${visibleCount} ${__(\"Vehicles\")}`);\n\n\t\t\t\tif (visibleCount === 0) {\n\t\t\t\t\tlet colCount = $popup.find(\n\t\t\t\t\t\t\".popup-content table thead th\",\n\t\t\t\t\t).length;\n\t\t\t\t\t$tableBody.append(\n\t\t\t\t\t\t`<tr class=\"no-match\"><td colspan=\"${colCount}\" style=\"text-align: center;\">${__(\n\t\t\t\t\t\t\t\"No matching VIN/Serial No found\",\n\t\t\t\t\t\t)}</td></tr>`,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$popup.show();\n\t\t}\n\n\t\tfunction open_model_popup(modelCode) {\n\t\t\t// Retrieve model data using frappe.call\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"edp_online_vehicles.events.get_model_data.get_model_data\",\n\t\t\t\targs: { modelname: modelCode },\n\t\t\t\tcallback: function (response) {\n\t\t\t\t\tif (response.message) {\n\t\t\t\t\t\tlet modelData = response.message;\n\t\t\t\t\t\t// Build an array of images (front, rear, left, right)\n\t\t\t\t\t\tlet images = [];\n\t\t\t\t\t\tif (modelData.front_image)\n\t\t\t\t\t\t\timages.push({\n\t\t\t\t\t\t\t\tlabel: \"Front\",\n\t\t\t\t\t\t\t\turl: modelData.front_image,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tif (modelData.rear_image)\n\t\t\t\t\t\t\timages.push({\n\t\t\t\t\t\t\t\tlabel: \"Rear\",\n\t\t\t\t\t\t\t\turl: modelData.rear_image,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tif (modelData.left_image)\n\t\t\t\t\t\t\timages.push({\n\t\t\t\t\t\t\t\tlabel: \"Left\",\n\t\t\t\t\t\t\t\turl: modelData.left_image,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tif (modelData.right_image)\n\t\t\t\t\t\t\timages.push({\n\t\t\t\t\t\t\t\tlabel: \"Right\",\n\t\t\t\t\t\t\t\turl: modelData.right_image,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tensureStyleTag('model-popup-css', `\n\t\t\t\t\t\t\t#model-popup-overlay { position: fixed; top:0; left:0; width:100vw; height:100vh; background: rgba(0,0,0,0.5); z-index:10000; }\n\t\t\t\t\t\t\t#model-popup { position: fixed; top:50%; left:50%; transform: translate(-50%,-50%); background:#fff; padding:20px; box-shadow:0 4px 10px rgba(0,0,0,0.3); max-height:90vh; overflow-y:auto; }\n\t\t\t\t\t\t\t#model-popup .model-close { position:absolute; top:10px; right:10px; background:transparent; border:none; font-size:18px; cursor:pointer; }\n\t\t\t\t\t\t\t.model-gallery { position:relative; text-align:center; }\n\t\t\t\t\t\t\t.model-gallery img { object-fit:contain; }\n\t\t\t\t\t\t\t.model-gallery .gallery-label { position:absolute; top:10px; left:10px; background:rgba(0,0,0,0.6); color:#fff; padding:5px 10px; font-size:14px; }\n\t\t\t\t\t\t\t.model-gallery .gallery-arrow { position:absolute; top:50%; transform:translateY(-50%); font-size:24px; color:rgba(0,0,0,0.5); cursor:pointer; display:none; }\n\t\t\t\t\t\t\t.model-gallery .left-arrow { left:10px; }\n\t\t\t\t\t\t\t.model-gallery .right-arrow { right:10px; }\n\t\t\t\t\t\t\t.model-gallery:hover .gallery-arrow { display:block; }\n\t\t\t\t\t\t\t.gallery-dots { text-align:center; margin-top:10px; }\n\t\t\t\t\t\t\t.gallery-dots .dot { display:inline-block; width:10px; height:10px; border-radius:50%; background:#ccc; margin:0 5px; cursor:pointer; }\n\t\t\t\t\t\t\t.gallery-dots .dot.active { background:#333; }\n\t\t\t\t\t\t\t.model-details table { width:100%; border-collapse:collapse; margin-top:20px; }\n\t\t\t\t\t\t\t.model-details th, .model-details td { padding:5px; border:1px solid #ccc; text-align:left; }\n\t\t\t\t\t\t\t.no-image-message { padding:20px; font-size:16px; color:#555; }\n\t\t\t\t\t\t`);\n\n\t\t\t\t\t\t// Create the modal HTML with an image gallery and model details table\n\t\t\t\t\t\tlet modalHtml = $(`\n\t\t\t\t\t\t\t<div id=\"model-popup-overlay\">\n\t\t\t\t\t\t\t\t<div id=\"model-popup\">\n\t\t\t\t\t\t\t\t\t<button class=\"model-close\">X</button>\n\t\t\t\t\t\t\t\t\t<div class=\"model-gallery\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"gallery-label\"></div>\n\t\t\t\t\t\t\t\t\t\t<img class=\"gallery-image\" src=\"\" alt=\"Model Image\" style=\"display:none;\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"gallery-arrow left-arrow\">&lt;</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"gallery-arrow right-arrow\">&gt;</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"gallery-dots\"></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"no-image-message\" style=\"display:none;\">No Image</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"model-details\">\n\t\t\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>Model Code</th><td>${modelData.model_code || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>Description</th><td>${modelData.model_description || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>Model Year</th><td>${modelData.model_year || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>Range</th><td>${modelData.range || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>Category</th><td>${modelData.category || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>Class</th><td>${modelData.class_ || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>M&M Code</th><td>${modelData.mm_code || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>Dealer Billing</th><td>R${modelData.dealer_billing_excl || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>Suggested Retail</th><td>R${modelData.suggested_retail_excl || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><th>Engine Displacement</th><td>${modelData.engine_displacement || \"\"}</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`);\n\n\t\t\t\t\t\t$(\"body\").append(modalHtml);\n\n\t\t\t\t\t\tlet currentIndex = 0;\n\t\t\t\t\t\tconst $galleryImage = modalHtml.find(\".gallery-image\");\n\t\t\t\t\t\tconst $galleryLabel = modalHtml.find(\".gallery-label\");\n\t\t\t\t\t\tconst $dotsContainer = modalHtml.find(\".gallery-dots\");\n\t\t\t\t\t\tconst $noImageMessage =\n\t\t\t\t\t\t\tmodalHtml.find(\".no-image-message\");\n\n\t\t\t\t\t\tfunction updateGallery() {\n\t\t\t\t\t\t\t// If there are no images, show a message.\n\t\t\t\t\t\t\tif (images.length === 0) {\n\t\t\t\t\t\t\t\t$galleryImage.hide();\n\t\t\t\t\t\t\t\t$noImageMessage.show();\n\t\t\t\t\t\t\t\t$galleryLabel.text(\"\");\n\t\t\t\t\t\t\t\t$dotsContainer.empty();\n\t\t\t\t\t\t\t\t$(\"#model-popup\").css({ width: \"300px\" });\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$noImageMessage.hide();\n\t\t\t\t\t\t\t$galleryImage.show();\n\n\t\t\t\t\t\t\tlet imgObj = images[currentIndex];\n\t\t\t\t\t\t\t$galleryImage.attr(\"src\", imgObj.url);\n\t\t\t\t\t\t\t$galleryLabel.text(\n\t\t\t\t\t\t\t\timgObj.label +\n\t\t\t\t\t\t\t\t\t\" Image (\" +\n\t\t\t\t\t\t\t\t\t(currentIndex + 1) +\n\t\t\t\t\t\t\t\t\t\" of \" +\n\t\t\t\t\t\t\t\t\timages.length +\n\t\t\t\t\t\t\t\t\t\")\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t$dotsContainer\n\t\t\t\t\t\t\t\t.find(\".dot\")\n\t\t\t\t\t\t\t\t.removeClass(\"active\")\n\t\t\t\t\t\t\t\t.eq(currentIndex)\n\t\t\t\t\t\t\t\t.addClass(\"active\");\n\n\t\t\t\t\t\t\t// Adjust modal size after the image loads.\n\t\t\t\t\t\t\t$galleryImage.off(\"load\").on(\"load\", function () {\n\t\t\t\t\t\t\t\tlet naturalWidth = this.naturalWidth;\n\t\t\t\t\t\t\t\tlet naturalHeight = this.naturalHeight;\n\t\t\t\t\t\t\t\tlet maxWidth = $(window).width() * 0.9; // 90% of viewport width\n\t\t\t\t\t\t\t\tlet maxModalHeight = $(window).height() * 0.9; // 90% of viewport height\n\n\t\t\t\t\t\t\t\t// Reserve some extra space for other modal content (e.g., close button, gallery label, dots, details table)\n\t\t\t\t\t\t\t\tlet extraSpace = 150;\n\t\t\t\t\t\t\t\tlet availableImageHeight =\n\t\t\t\t\t\t\t\t\tmaxModalHeight - extraSpace;\n\n\t\t\t\t\t\t\t\tlet newWidth = Math.min(naturalWidth, maxWidth);\n\t\t\t\t\t\t\t\tlet newHeight = Math.min(\n\t\t\t\t\t\t\t\t\tnaturalHeight,\n\t\t\t\t\t\t\t\t\tavailableImageHeight,\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t// Set the modal width based on the image's width.\n\t\t\t\t\t\t\t\t$(\"#model-popup\").css({\n\t\t\t\t\t\t\t\t\twidth: newWidth + \"px\",\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t$galleryImage.css({\n\t\t\t\t\t\t\t\t\twidth: newWidth + \"px\",\n\t\t\t\t\t\t\t\t\theight: newHeight + \"px\",\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Populate dots for navigation\n\t\t\t\t\t\t$dotsContainer.empty();\n\t\t\t\t\t\tif (images.length > 0) {\n\t\t\t\t\t\t\timages.forEach((img, index) => {\n\t\t\t\t\t\t\t\tlet $dot = $(`<span class=\"dot\"></span>`);\n\t\t\t\t\t\t\t\tif (index === 0) $dot.addClass(\"active\");\n\t\t\t\t\t\t\t\t$dot.on(\"click\", function () {\n\t\t\t\t\t\t\t\t\tcurrentIndex = index;\n\t\t\t\t\t\t\t\t\tupdateGallery();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t$dotsContainer.append($dot);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Initialize gallery\n\t\t\t\t\t\tupdateGallery();\n\n\t\t\t\t\t\t// Arrow navigation\n\t\t\t\t\t\tmodalHtml.find(\".left-arrow\").on(\"click\", function (e) {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tcurrentIndex =\n\t\t\t\t\t\t\t\t(currentIndex - 1 + images.length) %\n\t\t\t\t\t\t\t\timages.length;\n\t\t\t\t\t\t\tupdateGallery();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmodalHtml\n\t\t\t\t\t\t\t.find(\".right-arrow\")\n\t\t\t\t\t\t\t.on(\"click\", function (e) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tcurrentIndex =\n\t\t\t\t\t\t\t\t\t(currentIndex + 1) % images.length;\n\t\t\t\t\t\t\t\tupdateGallery();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Close modal actions\n\t\t\t\t\t\tmodalHtml.find(\".model-close\").on(\"click\", function () {\n\t\t\t\t\t\t\tmodalHtml.remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmodalHtml.on(\"click\", function (e) {\n\t\t\t\t\t\t\tif (e.target.id === \"model-popup-overlay\") {\n\t\t\t\t\t\t\t\tmodalHtml.remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tfunction allocateOrderAction($popup) {\n\t\t\t// Ensure exactly one vehicle is selected\n\t\t\tlet $selectedVehicleRow = $popup\n\t\t\t\t.find(\".vehicle-checkbox:checked\")\n\t\t\t\t.closest(\"tr\");\n\t\t\tif ($selectedVehicleRow.length !== 1) {\n\t\t\t\tfrappe.msgprint(\n\t\t\t\t\t__(\"Please select exactly one vehicle to allocate.\"),\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Extract the VIN and Model Code.\n\t\t\t// Adjust the cell indexes if your table layout changes.\n\t\t\tlet vin = $selectedVehicleRow.find(\".vinserial_no\").text().trim();\n\t\t\tlet modelCode = $selectedVehicleRow.find(\"td\").eq(2).text().trim();\n\t\t\tlet colour =\n\t\t\t\t$selectedVehicleRow.find(\"td\").eq(7).text().trim() || \"\";\n\n\t\t\t// Create the Frappe dialog\n\t\t\tlet d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __(\"Allocate Vehicle to Order\"),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"order_link\",\n\t\t\t\t\t\tlabel: __(\"Head Office Vehicle Orders ID\"),\n\t\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\t\toptions: \"Head Office Vehicle Orders\",\n\t\t\t\t\t\tget_query: () => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\t\t\tstatus: \"Pending\",\n\t\t\t\t\t\t\t\t\tvinserial_no: \"\",\n\t\t\t\t\t\t\t\t\tmodel: modelCode,\n\t\t\t\t\t\t\t\t\tcolour: colour,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"vinserial_no\",\n\t\t\t\t\t\tlabel: __(\"VIN/Serial No\"),\n\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t\tdefault: vin,\n\t\t\t\t\t\tread_only: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"model_code\",\n\t\t\t\t\t\tlabel: __(\"Model\"),\n\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t\tdefault: modelCode,\n\t\t\t\t\t\tread_only: 1,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tprimary_action_label: __(\"Allocate\"),\n\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod: \"edp_online_vehicles.events.stock_availability.allocate_vinno\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\thq_order_doc: values.order_link,\n\t\t\t\t\t\t\tvinno: values.vinserial_no,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\t\tfrappe.msgprint(r.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\td.hide();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\td.show();\n\t\t\t$popup.remove();\n\t\t}\n\n\t\tfunction reserveAction($popup) {\n\t\t\t// Ensure at least one vehicle is selected\n\t\t\tlet $selectedVehicleRows = $popup\n\t\t\t\t.find(\".vehicle-checkbox:checked\")\n\t\t\t\t.closest(\"tr\");\n\t\t\tif ($selectedVehicleRows.length === 0) {\n\t\t\t\tfrappe.msgprint(__(\"Please select at least one vehicle\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Extract the VIN numbers and dealer values from each selected row\n\t\t\tlet vins = [];\n\t\t\tlet dealers = [];\n\t\t\t$selectedVehicleRows.each(function () {\n\t\t\t\tlet vin = $(this).find(\".vinserial_no\").text().trim();\n\t\t\t\tvins.push(vin);\n\t\t\t\t// Assuming the dealer is in the 7th column (index 6)\n\t\t\t\tlet dealer = $(this).find(\"td\").eq(6).text().trim();\n\t\t\t\tdealers.push(dealer);\n\t\t\t});\n\n\t\t\t// If all selected vehicles have the same dealer, use that as the default; otherwise, leave it empty.\n\t\t\tlet defaultDealer = dealers.every((d) => d === dealers[0])\n\t\t\t\t? dealers[0]\n\t\t\t\t: \"\";\n\n\t\t\t// Create the Frappe dialog for reserving vehicles\n\t\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __(\"Reserve Stock\"),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __(\"Dealer\"),\n\t\t\t\t\t\tfieldname: \"dealer\",\n\t\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\t\toptions: \"Company\",\n\t\t\t\t\t\tdefault: defaultDealer,\n\t\t\t\t\t\treqd: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __(\"Customer\"),\n\t\t\t\t\t\tfieldname: \"customer\",\n\t\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\t\toptions: \"Dealer Customer\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __(\"Status\"),\n\t\t\t\t\t\tfieldname: \"status\",\n\t\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\t\toptions: [\"Reserved\"],\n\t\t\t\t\t\tdefault: \"Reserved\",\n\t\t\t\t\t\tread_only: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __(\"Reserve Reason\"),\n\t\t\t\t\t\tfieldname: \"reserve_reason\",\n\t\t\t\t\t\tfieldtype: \"Small Text\",\n\t\t\t\t\t\treqd: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __(\"Reserve From Date\"),\n\t\t\t\t\t\tfieldname: \"reserve_from_date\",\n\t\t\t\t\t\tfieldtype: \"Date\",\n\t\t\t\t\t\tdefault: frappe.datetime.get_today(),\n\t\t\t\t\t\treqd: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __(\"Reserve To Date\"),\n\t\t\t\t\t\tfieldname: \"reserve_to_date\",\n\t\t\t\t\t\tfieldtype: \"Date\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __(\"Vehicles\"),\n\t\t\t\t\t\tfieldname: \"selected_Vehicles\",\n\t\t\t\t\t\tfieldtype: \"Table\",\n\t\t\t\t\t\tread_only: 1,\n\t\t\t\t\t\tcannot_add_rows: false,\n\t\t\t\t\t\tin_place_edit: false,\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldname: \"vin_serial_no\",\n\t\t\t\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\t\t\tlabel: \"VIN/ Serial No\",\n\t\t\t\t\t\t\t\toptions: \"Vehicle Stock\",\n\t\t\t\t\t\t\t\tread_only: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\tdata: vins.map((v) => ({ vin_serial_no: v })),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tprimary_action_label: __(\"Reserve\"),\n\t\t\t\tprimary_action(values) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalues.reserve_to_date &&\n\t\t\t\t\t\tvalues.reserve_to_date < values.reserve_from_date\n\t\t\t\t\t) {\n\t\t\t\t\t\tfrappe.msgprint(\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\"Reserve To Date cannot be earlier than Reserve From Date.\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod: \"edp_online_vehicles.events.create_reserve_doc.create_reserve_doc\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tdocnames: vins,\n\t\t\t\t\t\t\tdealer: values.dealer,\n\t\t\t\t\t\t\tcustomer: values.customer,\n\t\t\t\t\t\t\tstatus: values.status,\n\t\t\t\t\t\t\treserve_reason: values.reserve_reason,\n\t\t\t\t\t\t\treserve_from_date: values.reserve_from_date,\n\t\t\t\t\t\t\treserve_to_date: values.reserve_to_date,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\t\tfrappe.msgprint(\n\t\t\t\t\t\t\t\t\t\"Selected Vehicles have been reserved.\",\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tdialog.hide();\n\t\t\t\t},\n\t\t\t});\n\t\t\tdialog.show();\n\t\t\t$popup.remove();\n\t\t}\n\t}\n\trefresh() {\n\t\tif (this.before_refresh) {\n\t\t\tthis.before_refresh();\n\t\t}\n\n\t\tvar me = this;\n\n\t\tfrappe.call({\n\t\t\tmethod: this.method,\n\t\t\targs: {\n\t\t\t\tmodel_range: this.model_range || \"\",\n\t\t\t\tmodel: this.model || \"\",\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tme.render(r.message);\n\t\t\t},\n\t\t});\n\t}\n\t// render(data) {\n\t// \tvar me = this;\n\n\t// \tif (this.start === 0) {\n\t// \t\tthis.max_count = 0;\n\t// \t\tthis.result.empty();\n\t// \t}\n\n\t// \tlet context = {};\n\n\t// \t// Get the stock data context, including max_count, etc.\n\t// \tcontext = this.get_stock_availability_dashboard_data(data, this.max_count, true);\n\n\t// \t// Fetch headers from the backend using frappe.call\n\t// \tfrappe.call({\n\t// \t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_headers.get_context\",\n\t// \t\targs: { context: context },\n\t// \t\tcallback: function (r) {\n\t// \t\t\tif (r.message) {\n\t// \t\t\t\tcontext.headers = r.message.headers || [];\n\t// \t\t\t\tcontext.hide_dealer_stock = 0\n\t// \t\t\t\tcontext.hide_unconfirmed_shipments = 0\n\n\t// \t\t\t\tfrappe.db.get_single_value('Vehicle Stock Settings', 'hide_dealer_stock_availability')\n\t// \t\t\t\t.then(hide_dealer => {\n\t// \t\t\t\t\tif (hide_dealer) {\n\t// \t\t\t\t\t\tcontext.hide_dealer_stock = hide_dealer || 0\n\t// \t\t\t\t\t}\n\n\t// \t\t\t\t\tfrappe.db.get_single_value('Vehicle Stock Settings', 'hide_unconfirmed_shipments')\n\t// \t\t\t\t\t.then(hide_unconfirmed_shipments => {\n\t// \t\t\t\t\t\tif (hide_unconfirmed_shipments) {\n\t// \t\t\t\t\t\t\tcontext.hide_unconfirmed_shipments = hide_unconfirmed_shipments || 0\n\t// \t\t\t\t\t\t}\n\n\t// \t\t\t\t\t\tif (context.data.length > 0) {\n\t// \t\t\t\t\t\t\tme.content.find(\".result\").css(\"text-align\", \"unset\");\n\t// \t\t\t\t\t\t\t$(frappe.render_template(me.template, context)).appendTo(me.result);\n\t// \t\t\t\t\t\t} else {\n\t// \t\t\t\t\t\t\tvar message = __(\"No Stock Available Currently\");\n\t// \t\t\t\t\t\t\tme.content.find(\".result\").css(\"text-align\", \"center\");\n\n\t// \t\t\t\t\t\t\t$(`<div class='text-muted' style='margin: 20px 5px;'>\n\t// \t\t\t\t\t\t\t\t${message} </div>`).appendTo(me.result);\n\t// \t\t\t\t\t\t}\n\t// \t\t\t\t\t});\n\t// \t\t\t\t});\n\t// \t\t\t}\n\t// \t\t},\n\t// \t});\n\t// }\n\n\trender(data) {\n\t\tconst me = this;\n\n\t\t// Always reset at the start of a fresh fetch\n\t\tif (this.start === 0) {\n\t\t\tthis.max_count = 0;\n\t\t}\n\n\t\tconst context = this.get_stock_availability_dashboard_data(\n\t\t\tdata,\n\t\t\tthis.max_count,\n\t\t\ttrue,\n\t\t);\n\n\t\tconsole.log(context);\n\n\t\tfrappe.call({\n\t\t\tmethod: \"edp_online_vehicles.edp_online_vehicles.dashboard.get_headers.get_context\",\n\t\t\targs: { context },\n\t\t\tcallback: function (r) {\n\t\t\t\tif (!r.message) return;\n\n\t\t\t\tcontext.headers = r.message.headers || [];\n\t\t\t\tcontext.hide_dealer_stock = 0;\n\t\t\t\tcontext.hide_unconfirmed_shipments = 0;\n\n\t\t\t\t// Chain your settings lookups\n\t\t\t\tfrappe.db\n\t\t\t\t\t.get_single_value(\n\t\t\t\t\t\t\"Vehicle Stock Settings\",\n\t\t\t\t\t\t\"hide_dealer_stock_availability\",\n\t\t\t\t\t)\n\t\t\t\t\t.then((hide_dealer) => {\n\t\t\t\t\t\tcontext.hide_dealer_stock = hide_dealer || 0;\n\t\t\t\t\t\treturn frappe.db.get_single_value(\n\t\t\t\t\t\t\t\"Vehicle Stock Settings\",\n\t\t\t\t\t\t\t\"hide_unconfirmed_shipments\",\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t\t.then((hide_unconfirmed) => {\n\t\t\t\t\t\tcontext.hide_unconfirmed_shipments =\n\t\t\t\t\t\t\thide_unconfirmed || 0;\n\n\t\t\t\t\t\t// When there's data, replace the entire container's contents\n\t\t\t\t\t\tif (context.data.length > 0) {\n\t\t\t\t\t\t\tme.content\n\t\t\t\t\t\t\t\t.find(\".result\")\n\t\t\t\t\t\t\t\t.css(\"text-align\", \"unset\");\n\t\t\t\t\t\t\t// **Here** we clear and then insert in one step:\n\t\t\t\t\t\t\tme.result.html(\n\t\t\t\t\t\t\t\t`<div class=\"dashboard-template-wrapper\">\n\t\t\t\t\t\t\t\t${frappe.render_template(me.template, context)}\n\t\t\t\t\t\t\t </div>`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst msg = __(\"No Stock Available Currently\");\n\t\t\t\t\t\t\tme.content\n\t\t\t\t\t\t\t\t.find(\".result\")\n\t\t\t\t\t\t\t\t.css(\"text-align\", \"center\");\n\t\t\t\t\t\t\tme.result.html(\n\t\t\t\t\t\t\t\t`<div class='text-muted' style='margin:20px 5px;'>${msg}</div>`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tget_stock_availability_dashboard_data(data, max_count, show_item) {\n\t\tif (!max_count) max_count = 0;\n\t\tif (!data) data = [];\n\n\t\tdata.forEach(function (model_range) {\n\t\t\t// Determine whether the counts are in \"Yes\" mode by checking the type of one count field.\n\t\t\t// (This assumes that when hide_vehicle_amount_in_stock is enabled, individual model count values are strings.)\n\t\t\tvar useYes = false;\n\t\t\tif (\n\t\t\t\tmodel_range.models &&\n\t\t\t\tmodel_range.models.length > 0 &&\n\t\t\t\ttypeof model_range.models[0].hq_company === \"string\"\n\t\t\t) {\n\t\t\t\tuseYes = true;\n\t\t\t}\n\n\t\t\t// Initialize totals. For monthly totals we always use numbers.\n\t\t\tif (!useYes) {\n\t\t\t\tmodel_range.hq_company_total = 0;\n\t\t\t\tmodel_range.dealers_total = 0;\n\t\t\t\tmodel_range.pipeline_total = 0;\n\t\t\t\tmodel_range.unconfirmed_shipments_total = 0;\n\t\t\t\tmodel_range.models_total = 0;\n\t\t\t} else {\n\t\t\t\tmodel_range.hq_company_total = \"\";\n\t\t\t\tmodel_range.dealers_total = \"\";\n\t\t\t\tmodel_range.pipeline_total = \"\";\n\t\t\t\tmodel_range.unconfirmed_shipments_total = \"\";\n\t\t\t\tmodel_range.models_total = \"\";\n\t\t\t}\n\t\t\tmodel_range.date_1_total = 0;\n\t\t\tmodel_range.date_2_total = 0;\n\t\t\tmodel_range.date_3_total = 0;\n\t\t\tmodel_range.date_4_total = 0;\n\t\t\tmodel_range.date_5_total = 0;\n\t\t\tmodel_range.date_6_total = 0;\n\t\t\tmodel_range.date_7_total = 0;\n\t\t\tmodel_range.date_8_total = 0;\n\t\t\tmodel_range.date_9_total = 0;\n\t\t\tmodel_range.date_10_total = 0;\n\t\t\tmodel_range.date_11_total = 0;\n\t\t\tmodel_range.date_12_total = 0;\n\n\t\t\t// Iterate over the models in each model_range\n\t\t\tmodel_range.models.forEach(function (model) {\n\t\t\t\tif (useYes) {\n\t\t\t\t\t// In \"Yes mode\": if any count field is \"Yes\", then the model's total is \"Yes\"\n\t\t\t\t\tvar total =\n\t\t\t\t\t\tmodel.hq_company === \"Yes\" ||\n\t\t\t\t\t\tmodel.dealers === \"Yes\" ||\n\t\t\t\t\t\tmodel.pipeline === \"Yes\" ||\n\t\t\t\t\t\tmodel.unconfirmed_shipments === \"Yes\"\n\t\t\t\t\t\t\t? \"Yes\"\n\t\t\t\t\t\t\t: \"\";\n\t\t\t\t\tmodel.total = total;\n\n\t\t\t\t\t// At the group level, set each field to \"Yes\" if any model has \"Yes\" for that field.\n\t\t\t\t\tif (model.hq_company === \"Yes\") {\n\t\t\t\t\t\tmodel_range.hq_company_total = \"Yes\";\n\t\t\t\t\t}\n\t\t\t\t\tif (model.dealers === \"Yes\") {\n\t\t\t\t\t\tmodel_range.dealers_total = \"Yes\";\n\t\t\t\t\t}\n\t\t\t\t\tif (model.pipeline === \"Yes\") {\n\t\t\t\t\t\tmodel_range.pipeline_total = \"Yes\";\n\t\t\t\t\t}\n\t\t\t\t\tif (model.unconfirmed_shipments === \"Yes\") {\n\t\t\t\t\t\tmodel_range.unconfirmed_shipments_total = \"Yes\";\n\t\t\t\t\t}\n\t\t\t\t\tif (total === \"Yes\") {\n\t\t\t\t\t\tmodel_range.models_total = \"Yes\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// In numeric mode: calculate the total as the sum\n\t\t\t\t\tmodel.total =\n\t\t\t\t\t\tmodel.hq_company +\n\t\t\t\t\t\tmodel.dealers +\n\t\t\t\t\t\tmodel.pipeline +\n\t\t\t\t\t\tmodel.unconfirmed_shipments;\n\t\t\t\t\tmodel_range.hq_company_total += model.hq_company;\n\t\t\t\t\tmodel_range.dealers_total += model.dealers;\n\t\t\t\t\tmodel_range.pipeline_total += model.pipeline;\n\t\t\t\t\tmodel_range.unconfirmed_shipments_total +=\n\t\t\t\t\t\tmodel.unconfirmed_shipments;\n\t\t\t\t\tmodel_range.models_total += model.total;\n\t\t\t\t\tmax_count = Math.max(model.total, max_count);\n\t\t\t\t}\n\t\t\t\t// Sum the monthly shipment counts (these are always numeric)\n\t\t\t\tmodel_range.date_1_total += model.date_1;\n\t\t\t\tmodel_range.date_2_total += model.date_2;\n\t\t\t\tmodel_range.date_3_total += model.date_3;\n\t\t\t\tmodel_range.date_4_total += model.date_4;\n\t\t\t\tmodel_range.date_5_total += model.date_5;\n\t\t\t\tmodel_range.date_6_total += model.date_6;\n\t\t\t\tmodel_range.date_7_total += model.date_7;\n\t\t\t\tmodel_range.date_8_total += model.date_8;\n\t\t\t\tmodel_range.date_9_total += model.date_9;\n\t\t\t\tmodel_range.date_10_total += model.date_10;\n\t\t\t\tmodel_range.date_11_total += model.date_11;\n\t\t\t\tmodel_range.date_12_total += model.date_12;\n\t\t\t});\n\n\t\t\t// If in Yes mode, convert the monthly shipment totals as well:\n\t\t\tif (useYes) {\n\t\t\t\tfor (var i = 1; i <= 12; i++) {\n\t\t\t\t\tvar dateField = \"date_\" + i + \"_total\";\n\t\t\t\t\tmodel_range[dateField] =\n\t\t\t\t\t\tmodel_range[dateField] > 0 ? \"Yes\" : \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tdata: data,\n\t\t\tmax_count: max_count,\n\t\t\tcan_write: 1,\n\t\t\tshow_item: show_item || false,\n\t\t};\n\t}\n};\n"],
  "mappings": ";;AACC,SAAO,UAAU,wBAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAzC,SAAO,UAAU,6BAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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",
  "names": ["updateGallery"]
}
